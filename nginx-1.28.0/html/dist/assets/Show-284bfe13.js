import{f as C,u as k,g as U,h as w,a as d,c as i,b as t,i as E,j as c,v as m,k as _,F as f,l as b,t as a,n as L,_ as S}from"./index-11f0a9be.js";import{a as p}from"./axiosInstance-f3a3ca4f.js";const V={id:"container"},A={class:"form-horizontal"},D={class:"col-sm-2"},B={class:"col-sm-2"},I={class:"col-sm-2"},M={class:"col-sm-2"},z={class:"col-sm-2"},F=["textContent","value"],T={class:"table table-striped table-bordered table-hover"},j={class:"scrollable-tbody"},q=["onClick"],N=["textContent"],R=["textContent"],$=["textContent"],G=["textContent"],H=["textContent"],J=C({__name:"Show",setup(K){const r=k(),s=U(-1),l=w({form:{number:null,name:null,gender:"",age:null,"dep.id":""},list:[],depList:[]}),u=()=>{console.log("搜索函数被调用"),console.log("搜索参数:",l.form);try{p.get("/emp",{params:l.form}).then(n=>{console.log("搜索请求成功，响应数据:",n.data),l.list=n.data,l.list.sort((o,e)=>o.number-e.number),console.log("搜索结果（升序排列）:",l.list)}).catch(n=>{console.error("搜索请求失败:",n)})}catch(n){console.error("搜索函数执行出错:",n)}},g=()=>{p.get("/dep").then(n=>{l.depList=n.data,console.log("部门数据加载成功:",n.data)}).catch(n=>{console.error("部门数据加载失败:",n),l.depList=[{id:1,name:"测试部"},{id:2,name:"产品部"},{id:3,name:"设计部"}],console.log("使用默认部门数据:",l.depList)})},v=n=>{console.log(n),s.value=n},h=()=>{var n,o;console.log("点击了新增按钮"),console.log("router对象:",r),console.log("EmpAdd路由是否存在:",(o=(n=r.options.routes[0])==null?void 0:n.children)==null?void 0:o.find(e=>e.name==="EmpAdd"));try{r.push({name:"EmpAdd"}),console.log("路由跳转成功")}catch(e){console.error("路由跳转失败:",e)}},x=()=>{var n,o;if(console.log("点击了修改按钮"),console.log("selectedId:",s.value),s.value>-1){console.log("router对象:",r),console.log("EmpUpdate路由是否存在:",(o=(n=r.options.routes[0])==null?void 0:n.children)==null?void 0:o.find(e=>e.name==="EmpUpdate"));try{r.push({name:"EmpUpdate",query:{id:s.value}}),console.log("路由跳转成功")}catch(e){console.error("路由跳转失败:",e)}}else alert("请选中数据")},y=()=>{s.value>-1?p.delete("/emp/"+s.value).then(n=>{n.data==!0?u():alert("系统错误")}):alert("请选中数据")};return u(),g(),(n,o)=>(d(),i("div",V,[t("div",A,[t("form",{class:"form-group",onSubmit:E(u,["prevent"])},[t("div",D,[c(t("input",{type:"text",class:"form-control",placeholder:"编号","onUpdate:modelValue":o[0]||(o[0]=e=>l.form.number=e)},null,512),[[m,l.form.number]])]),t("div",B,[c(t("input",{type:"text",class:"form-control",placeholder:"姓名","onUpdate:modelValue":o[1]||(o[1]=e=>l.form.name=e)},null,512),[[m,l.form.name]])]),t("div",I,[c(t("select",{name:"gender",class:"form-control","onUpdate:modelValue":o[2]||(o[2]=e=>l.form.gender=e)},[...o[5]||(o[5]=[t("option",{value:""},"性别",-1),t("option",{value:"男"},"男",-1),t("option",{value:"女"},"女",-1)])],512),[[_,l.form.gender]])]),t("div",M,[c(t("input",{type:"text",class:"form-control",placeholder:"年龄","onUpdate:modelValue":o[3]||(o[3]=e=>l.form.age=e)},null,512),[[m,l.form.age]])]),t("div",z,[c(t("select",{class:"form-control","onUpdate:modelValue":o[4]||(o[4]=e=>l.form["dep.id"]=e)},[o[6]||(o[6]=t("option",{value:""},"部门",-1)),(d(!0),i(f,null,b(l.depList,e=>(d(),i("option",{textContent:a(e.name),key:e.id,value:e.id},null,8,F))),128))],512),[[_,l.form["dep.id"]]])]),o[7]||(o[7]=t("div",{class:"col-sm-2"},[t("button",{type:"submit",class:"btn btn-primary"},"搜索")],-1))],32)]),t("table",T,[o[8]||(o[8]=t("thead",null,[t("tr",null,[t("th",null,"编号"),t("th",null,"名字"),t("th",null,"性别"),t("th",null,"年龄"),t("th",null,"部门")])],-1)),t("tbody",j,[(d(!0),i(f,null,b(l.list,e=>(d(),i("tr",{class:L(["data",{selected:e.id==s.value}]),key:e.id,onClick:O=>v(e.id)},[t("td",{textContent:a(e.number)},null,8,N),t("td",{textContent:a(e.name)},null,8,R),t("td",{textContent:a(e.gender)},null,8,$),t("td",{textContent:a(e.age)},null,8,G),t("td",{textContent:a(e.dep!=null?e.dep.name:"")},null,8,H)],10,q))),128))])]),t("div",{id:"buttons"},[t("button",{type:"button",class:"btn btn-primary",onClick:h},"新增"),t("button",{type:"button",class:"btn btn-primary",onClick:x},"修改"),t("button",{type:"button",class:"btn btn-danger",onClick:y},"删除")])]))}});const W=S(J,[["__scopeId","data-v-80e3a5e3"]]);export{W as default};
